<html>
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <title>Secure base64 encoding</title>
    <style>
      body {
        font-family: -apple-system, Roboto, sans-serif;
        padding: 20px;
      }

      h1,
      p {
        max-width: 800px;
      }

      textarea {
        display: block;
        margin-bottom: 20px;
        width: 100%;
        max-width: 600px;
        height: 200px;
      }
    </style>
  </head>

  <body>
    <h1>Encode and decode base64 on-device. ðŸ”’</h1>
    <p>
      This website claims to perform base64 encoding on device. However, as a
      user it is to verify this. By loading this website into a secure sandbox
      such as the Oak chrome extension though, users can enforce this policy.
    </p>
    <a
      href="https://github.com/juliettepretot/csp-locked-client-side-base64"
      onclick="location.href = this.getAttribute('href') + '?' + encodeURIComponent(document.getElementById('textarea').value); return false;"
      >inspect this websites source code</a
    ><br />
    <textarea
      placeholder="Enter data to encode/decode here..."
      id="textarea"
    ></textarea>
    <button id="encode-button">Encode</button>
    <button id="decode-button">Decode</button>
    <script>
      const textarea = document.getElementById('textarea')

      document.getElementById('encode-button').addEventListener('click', () => {
        textarea.value = btoa(textarea.value)
      })

      document.getElementById('decode-button').addEventListener('click', () => {
        textarea.value = atob(textarea.value)
      })
    </script>
  </body>
</html>
